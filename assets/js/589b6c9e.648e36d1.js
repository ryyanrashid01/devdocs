"use strict";(self.webpackChunkdeploy_to_vm=self.webpackChunkdeploy_to_vm||[]).push([[1730],{3699:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Repositories/PRISM/FastAPI/main","title":"Main","description":"This FastAPI application provides an API for generating and visualizing drone paths within a defined monitoring zone (MZ). It supports both standard and \\"rogue\\" path generation, as well as rendering path visuals.","source":"@site/docs/Repositories/PRISM/FastAPI/main.md","sourceDirName":"Repositories/PRISM/FastAPI","slug":"/Repositories/PRISM/FastAPI/main","permalink":"/devdocs/docs/Repositories/PRISM/FastAPI/main","draft":false,"unlisted":false,"editUrl":"https://github.com/ryyanrashid01/devdocs/edit/main/docs/Repositories/PRISM/FastAPI/main.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Impacts","permalink":"/devdocs/docs/Repositories/PRISM/Constants/impacts"},"next":{"title":"SmoothSpeed","permalink":"/devdocs/docs/Repositories/PRISM/FastAPI/smooth_speed"}}');var i=s(4848),d=s(8453);const t={sidebar_position:1},o="Main",l={},a=[{value:"Dependencies",id:"dependencies",level:2},{value:"API Overview",id:"api-overview",level:2},{value:"CORS Configuration",id:"cors-configuration",level:2},{value:"Data Models",id:"data-models",level:2},{value:"<code>Center</code>",id:"center",level:3},{value:"<code>MZ</code> (Monitoring Zone)",id:"mz-monitoring-zone",level:3},{value:"<code>RoguePathSegment</code>",id:"roguepathsegment",level:3},{value:"<code>DroneConfig</code>",id:"droneconfig",level:3},{value:"<code>PathRequest</code>",id:"pathrequest",level:3},{value:"<code>PointDict</code>",id:"pointdict",level:3},{value:"<code>RoguePathRequest</code>",id:"roguepathrequest",level:3},{value:"<code>DronePath</code>",id:"dronepath",level:3},{value:"<code>DronePathsImageRequest</code>",id:"dronepathsimagerequest",level:3},{value:"Endpoints",id:"endpoints",level:2},{value:"<code>GET /</code>",id:"get-",level:3},{value:"Response",id:"response",level:4},{value:"<code>POST /generate_paths</code>",id:"post-generate_paths",level:3},{value:"Request Body: <code>PathRequest</code>",id:"request-body-pathrequest",level:4},{value:"Response",id:"response-1",level:4},{value:"<code>POST /generate_rogue_paths</code>",id:"post-generate_rogue_paths",level:3},{value:"Request Body: <code>RoguePathRequest</code>",id:"request-body-roguepathrequest",level:4},{value:"Response",id:"response-2",level:4},{value:"<code>POST /drone-paths-image</code>",id:"post-drone-paths-image",level:3},{value:"Request Body: <code>DronePathsImageRequest</code>",id:"request-body-dronepathsimagerequest",level:4},{value:"Response",id:"response-3",level:4},{value:"Helper Functions (from <code>helper.py</code>)",id:"helper-functions-from-helperpy",level:2},{value:"Development Tips",id:"development-tips",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"main",children:"Main"})}),"\n",(0,i.jsx)(n.p,{children:'This FastAPI application provides an API for generating and visualizing drone paths within a defined monitoring zone (MZ). It supports both standard and "rogue" path generation, as well as rendering path visuals.'}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"fastapi"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pydantic"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"fastapi.middleware.cors.CORSMiddleware"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"StreamingResponse"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"helper"})," (custom module containing core logic like ",(0,i.jsx)(n.code,{children:"generate_collision_free_paths"}),", ",(0,i.jsx)(n.code,{children:"generate_rogue_path"}),", ",(0,i.jsx)(n.code,{children:"plot_drone_paths_image"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"api-overview",children:"API Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Method"}),(0,i.jsx)(n.th,{children:"Endpoint"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/"})}),(0,i.jsx)(n.td,{children:"Health check"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/generate_paths"})}),(0,i.jsx)(n.td,{children:"Generate paths for drones"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/generate_rogue_paths"})}),(0,i.jsx)(n.td,{children:"Generate rogue paths for drones"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/drone-paths-image"})}),(0,i.jsx)(n.td,{children:"Generate an image of drone paths"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"cors-configuration",children:"CORS Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Allowed origins:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"http://localhost:5173"})," \u2013 For local frontend development"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"https://prism.secure-utm.org"})," \u2013 For production frontend"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"data-models",children:"Data Models"}),"\n",(0,i.jsx)(n.h3,{id:"center",children:(0,i.jsx)(n.code,{children:"Center"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"latitude: float\nlongitude: float\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"mz-monitoring-zone",children:[(0,i.jsx)(n.code,{children:"MZ"})," (Monitoring Zone)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"center: Center\nradius: float  # in meters\n"})}),"\n",(0,i.jsx)(n.h3,{id:"roguepathsegment",children:(0,i.jsx)(n.code,{children:"RoguePathSegment"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"start: float\nend: float\n"})}),"\n",(0,i.jsx)(n.h3,{id:"droneconfig",children:(0,i.jsx)(n.code,{children:"DroneConfig"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'speed: Literal["low", "high", "default"]\ndeviation: Literal["minor", "major", "none"]\ntortuosity: float\nrogue_path_segment: RoguePathSegment\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pathrequest",children:(0,i.jsx)(n.code,{children:"PathRequest"})}),"\n",(0,i.jsx)(n.p,{children:"Used for requesting path generation."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"mz: MZ\ndrones: List[DroneConfig]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pointdict",children:(0,i.jsx)(n.code,{children:"PointDict"})}),"\n",(0,i.jsx)(n.p,{children:"Represents a single drone path point."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"lat: float\nlon: float\nt: float\nspeed: float\n"})}),"\n",(0,i.jsx)(n.h3,{id:"roguepathrequest",children:(0,i.jsx)(n.code,{children:"RoguePathRequest"})}),"\n",(0,i.jsx)(n.p,{children:"Used for generating rogue paths."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"mz: MZ\ndrones: List[DroneConfig]\noriginal_paths: List[List[PointDict]]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"dronepath",children:(0,i.jsx)(n.code,{children:"DronePath"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"label: str\npath: List[PointDict]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"dronepathsimagerequest",children:(0,i.jsx)(n.code,{children:"DronePathsImageRequest"})}),"\n",(0,i.jsx)(n.p,{children:"Used for image rendering."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"paths: List[List[PointDict]]       # Original paths\ndronePaths: List[DronePath]\nmonitoringZone: MZ\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"get-",children:(0,i.jsx)(n.code,{children:"GET /"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Health check"})}),"\n",(0,i.jsx)(n.p,{children:"Returns a simple JSON response to confirm the API is operational."}),"\n",(0,i.jsx)(n.h4,{id:"response",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "message": "API is up and running"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"post-generate_paths",children:(0,i.jsx)(n.code,{children:"POST /generate_paths"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Generates initial collision-free paths for multiple drones."})}),"\n",(0,i.jsxs)(n.h4,{id:"request-body-pathrequest",children:["Request Body: ",(0,i.jsx)(n.code,{children:"PathRequest"})]}),"\n",(0,i.jsx)(n.h4,{id:"response-1",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "center": {"lat": float, "lon": float},\n  "radius": float,\n  "num_drones": int,\n  "paths": List[List[PointDict]]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"post-generate_rogue_paths",children:(0,i.jsx)(n.code,{children:"POST /generate_rogue_paths"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Generates altered rogue paths for drones based on deviation and tortuosity."})}),"\n",(0,i.jsxs)(n.h4,{id:"request-body-roguepathrequest",children:["Request Body: ",(0,i.jsx)(n.code,{children:"RoguePathRequest"})]}),"\n",(0,i.jsx)(n.h4,{id:"response-2",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "center": {"lat": float, "lon": float},\n  "radius": float,\n  "num_drones": int,\n  "paths": List[List[PointDict]]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If the number of drones doesn't match the number of original paths, an error is returned."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"post-drone-paths-image",children:(0,i.jsx)(n.code,{children:"POST /drone-paths-image"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Generates a PNG image of the drone paths and monitoring zone."})}),"\n",(0,i.jsxs)(n.h4,{id:"request-body-dronepathsimagerequest",children:["Request Body: ",(0,i.jsx)(n.code,{children:"DronePathsImageRequest"})]}),"\n",(0,i.jsx)(n.h4,{id:"response-3",children:"Response"}),"\n",(0,i.jsxs)(n.p,{children:["Returns a PNG image as a ",(0,i.jsx)(n.code,{children:"StreamingResponse"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"helper-functions-from-helperpy",children:["Helper Functions (from ",(0,i.jsx)(n.code,{children:"helper.py"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"These are used internally:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"generate_collision_free_paths(center, radius, drones)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"generate_rogue_path(orig_path, orig_speeds, mz_radius, center, curviness, deviation, start_frac, end_frac)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"plot_drone_paths_image(monitoring_zone, original_paths, drone_paths)"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"development-tips",children:"Development Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"To run locally:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uvicorn main:app --reload\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ensure your frontend (on port ",(0,i.jsx)(n.code,{children:"5173"}),") is allowed by CORS when testing locally."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var r=s(6540);const i={},d=r.createContext(i);function t(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);